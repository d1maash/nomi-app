# ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Clerk OAuth - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## üìä –°—Ç–∞—Ç—É—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

‚úÖ **expo-secure-store —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω**
‚úÖ **Token Cache –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ ClerkProvider**  
‚úÖ **useWarmUpBrowser –¥–æ–±–∞–≤–ª–µ–Ω –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ù–ê–°–¢–†–û–ô–ö–ò:**
- Redirect URLs –≤ Clerk Dashboard
- OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (Google/Apple)
- Native API (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)

## üéØ –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–û—à–∏–±–∫–∞: **"Clerk –Ω–µ —Å–æ–∑–¥–∞–ª —Å–µ—Å—Å–∏—é. –ü—Ä–æ–≤–µ—Ä—å Redirect URLs –≤ Dashboard!"**

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ OAuth flow –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è, –Ω–æ Clerk –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏—é –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Redirect URLs.

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –í–∫–ª—é—á–∏ Native API –≤ Clerk ‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!

1. –û—Ç–∫—Ä–æ–π https://dashboard.clerk.com/last-active?path=native-applications
2. –ù–∞–π–¥–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å **"Enable Native API"**
3. **–í–∫–ª—é—á–∏ –µ–≥–æ** ‚úÖ
4. –ù–∞–∂–º–∏ **Save** (–°–æ—Ö—Ä–∞–Ω–∏—Ç—å)

**–ë–µ–∑ —ç—Ç–æ–≥–æ —à–∞–≥–∞ OAuth –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!**

---

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π Google OAuth

1. –í Clerk Dashboard –ø–µ—Ä–µ–π–¥–∏ –≤ **Configure ‚Üí SSO Connections**
2. –ù–∞–π–¥–∏ **Google** –≤ —Å–ø–∏—Å–∫–µ
3. –ù–∞–∂–º–∏ **Enable** (–í–∫–ª—é—á–∏—Ç—å)
4. –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Clerk –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ credentials - –Ω–∏—á–µ–≥–æ –±–æ–ª—å—à–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ! ‚úÖ

---

### –®–∞–≥ 3: –î–æ–±–∞–≤—å Redirect URLs –≤ Clerk (–ö–†–ò–¢–ò–ß–ù–û!)

Clerk –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å, –∫—É–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:

1. –í Clerk Dashboard –ø–µ—Ä–µ–π–¥–∏ –≤ **Configure ‚Üí Paths** (–∏–ª–∏ **Configure ‚Üí Settings**)
2. –ù–∞–π–¥–∏ —Ä–∞–∑–¥–µ–ª **Allowed Redirect URLs** –∏–ª–∏ **Authorized redirect URIs**
3. –î–æ–±–∞–≤—å –í–°–ï —ç—Ç–∏ URLs:
   ```
   nomiapp://*
   exp://localhost:8081
   exp://192.168.*:8081
   http://localhost:8081
   ```
4. –ù–∞–∂–º–∏ **Add** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ URL
5. –°–æ—Ö—Ä–∞–Ω–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–ü–æ—á–µ–º—É –Ω–µ—Å–∫–æ–ª—å–∫–æ URL?**
- `nomiapp://*` - –¥–ª—è production —Å–±–æ—Ä–∫–∏
- `exp://localhost:8081` - –¥–ª—è Expo Go –Ω–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä–µ
- `exp://192.168.*:8081` - –¥–ª—è Expo Go –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- `http://localhost:8081` - –¥–ª—è web –≤–µ—Ä—Å–∏–∏

---

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å .env —Ñ–∞–π–ª

–£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ `.env` –µ—Å—Ç—å —Ç–≤–æ–π Clerk –∫–ª—é—á:

```bash
cat .env
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
EXPO_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_xxxxxxxxxx
```

–ï—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç - –¥–æ–±–∞–≤—å –µ–≥–æ.

---

### –®–∞–≥ 5: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏ —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å (Ctrl+C)
# –û—á–∏—Å—Ç–∏ –∫—ç—à –∏ –∑–∞–ø—É—Å—Ç–∏ –∑–∞–Ω–æ–≤–æ
npx expo start --clear
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:

1. –û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–∂–º–∏ **"–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google"**
3. –î–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –æ–∫–Ω–æ –±—Ä–∞—É–∑–µ—Ä–∞ —Å —Ñ–æ—Ä–º–æ–π –≤—Ö–æ–¥–∞ Google
4. –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ —Ç—ã –≤–µ—Ä–Ω–µ—à—å—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üêõ –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: "Cancelled (no session)"

–ï—Å–ª–∏ –≤ –ª–æ–≥–∞—Ö –≤–∏–¥–∏—à—å:
```
OAuth Result: {"createdSessionId": "", "setActive": true, "signIn": true, "signUp": true}
‚ùå Google Sign In - Cancelled (no session)
```

**–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:** OAuth –æ–∫–Ω–æ –æ—Ç–∫—Ä—ã–ª–æ—Å—å, –Ω–æ –Ω–µ –≤–µ—Ä–Ω—É–ª–æ —Å–µ—Å—Å–∏—é. –ü—Ä–∏—á–∏–Ω—ã:

#### 1. **–°–ê–ú–ê–Ø –ß–ê–°–¢–ê–Ø:** Redirect URLs –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ Clerk

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –Ω–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É:
```
üì± App URL Scheme: exp://192.168.x.x:8081
```

–°–∫–æ–ø–∏—Ä—É–π —ç—Ç–æ—Ç URL –∏ –¥–æ–±–∞–≤—å –≤ Clerk:
1. Dashboard ‚Üí Configure ‚Üí Paths ‚Üí Allowed Redirect URLs
2. –î–æ–±–∞–≤—å: `exp://192.168.*:8081` –∏ `nomiapp://*`
3. –°–æ—Ö—Ä–∞–Ω–∏

#### 2. –¢—ã –∑–∞–∫—Ä—ã–ª –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

–ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑ –∏ **–¥–æ–∂–¥–∏—Å—å –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏** —Å—Ç—Ä–∞–Ω–∏—Ü—ã Google, –∑–∞—Ç–µ–º –≤–æ–π–¥–∏.

#### 3. Google OAuth –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Clerk

1. Dashboard ‚Üí Configure ‚Üí SSO Connections ‚Üí Google
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Å—Ç–∞—Ç—É—Å **"Enabled" (–∑–µ–ª–µ–Ω—ã–π)**
3. –ï—Å–ª–∏ –∫—Ä–∞—Å–Ω—ã–π - –Ω–∞–∂–º–∏ Enable

---

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: Native API –≤–∫–ª—é—á–µ–Ω?
```
Dashboard ‚Üí Configure ‚Üí Native applications ‚Üí Enable Native API –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –í–ö–õ ‚úÖ
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: Google OAuth –≤–∫–ª—é—á–µ–Ω?
```
Dashboard ‚Üí Configure ‚Üí SSO Connections ‚Üí Google –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –í–ö–õ ‚úÖ
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: Redirect URLs –¥–æ–±–∞–≤–ª–µ–Ω—ã?
```
Dashboard ‚Üí Configure ‚Üí Paths ‚Üí Allowed Redirect URLs –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:
- exp://192.168.*:8081 (–∏–ª–∏ —Ç–≤–æ–π URL –∏–∑ –ª–æ–≥–æ–≤)
- nomiapp://*
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 4: –ö–ª—é—á –≤ .env –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π?
```bash
cat .env | grep CLERK
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å: EXPO_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 5: –°–º–æ—Ç—Ä–∏ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
–ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google" –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```
üöÄ Google Sign In - Starting...
üì± App URL Scheme: exp://...
üì¶ OAuth Result: {...}
üîê Sign In flow detected (–∏–ª–∏ üìù Sign Up flow detected)
‚úÖ Google Sign In - Success!
```

–ï—Å–ª–∏ –≤–∏–¥–∏—à—å –¥—Ä—É–≥–æ–µ - –ø—Ä–∏—à–ª–∏ –≤–µ—Å—å –ª–æ–≥.

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- Clerk Dashboard: https://dashboard.clerk.com
- Native API Settings: https://dashboard.clerk.com/last-active?path=native-applications
- Clerk Docs –¥–ª—è Expo: https://clerk.com/docs/quickstarts/expo
- OAuth Setup: https://clerk.com/docs/authentication/social-connections/oauth

---

## üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ

‚úÖ **Token Cache** - –¥–æ–±–∞–≤–ª–µ–Ω –≤ `app/_layout.tsx`:
```typescript
import { tokenCache } from '@clerk/clerk-expo/token-cache';

<ClerkProvider 
  publishableKey={CLERK_CONFIG.publishableKey}
  tokenCache={tokenCache}  // ‚Üê –î–û–ë–ê–í–õ–ï–ù–û
>
```

‚úÖ **useWarmUpBrowser** - –¥–æ–±–∞–≤–ª–µ–Ω –≤ `app/auth.tsx` –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ OAuth

‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - —Ç–µ–ø–µ—Ä—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—É–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö OAuth

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥ Redirect URLs** - –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã URLs –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

---

## üí° –°–æ–≤–µ—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

–°–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–µ credentials –æ—Ç Clerk –¥–ª—è Google OAuth.

–î–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ App Store/Google Play:
1. –°–æ–∑–¥–∞–π —Å–≤–æ–π OAuth Client –≤ Google Cloud Console
2. –î–æ–±–∞–≤—å —Å–≤–æ–∏ Client ID –∏ Secret –≤ Clerk
3. –ù–∞—Å—Ç—Ä–æ–π Apple Sign In (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è iOS)

–ù–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—É—â–µ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ! ‚úÖ

